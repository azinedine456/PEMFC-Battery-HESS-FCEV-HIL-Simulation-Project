Version 4
SHEET 1 2264 1048
WIRE 48 -144 -2032 -144
WIRE -1792 80 -1872 80
WIRE 256 112 224 112
WIRE 496 112 336 112
WIRE 592 112 496 112
WIRE 992 112 656 112
WIRE 1040 112 992 112
WIRE 1200 112 1040 112
WIRE 1200 128 1200 112
WIRE -496 144 -544 144
WIRE -480 144 -496 144
WIRE 224 144 224 112
WIRE 496 144 496 112
WIRE 992 144 992 112
WIRE -1872 160 -1872 80
WIRE -1792 160 -1792 80
WIRE -1424 160 -1504 160
WIRE -1328 160 -1424 160
WIRE -1248 160 -1264 160
WIRE -1232 160 -1248 160
WIRE -1040 160 -1168 160
WIRE -1008 160 -1040 160
WIRE -928 160 -944 160
WIRE -784 160 -864 160
WIRE -720 160 -784 160
WIRE -608 160 -624 160
WIRE 432 160 400 160
WIRE 448 160 432 160
WIRE -1504 192 -1504 160
WIRE 448 224 448 208
WIRE 496 224 448 224
WIRE -1296 240 -1296 192
WIRE -1024 240 -1040 240
WIRE -1008 240 -1024 240
WIRE -976 240 -976 192
WIRE -976 240 -1008 240
WIRE 224 240 224 224
WIRE 496 240 496 224
WIRE 496 240 224 240
WIRE 992 240 992 208
WIRE 992 240 496 240
WIRE 1200 240 1200 208
WIRE 1200 240 992 240
WIRE -896 256 -896 192
WIRE -1296 288 -1296 240
WIRE -624 288 -624 160
WIRE -464 288 -624 288
WIRE 496 288 496 240
WIRE -240 304 -400 304
WIRE -160 304 -240 304
WIRE -1872 336 -1872 240
WIRE -1792 336 -1792 240
WIRE -1792 336 -1872 336
WIRE -1872 368 -1872 336
WIRE -1088 384 -1088 240
WIRE -1504 432 -1504 272
WIRE -1296 432 -1296 368
WIRE -896 432 -896 336
WIRE -2048 672 -2048 -160
WIRE 48 672 48 -144
WIRE 48 672 -2048 672
FLAG -496 144 vc1
FLAG -240 304 vc2
FLAG -784 160 mod
FLAG 496 288 0
FLAG 1040 112 out
FLAG 432 160 vc2
FLAG -1296 432 0
FLAG -1504 432 0
FLAG -1040 160 m*_p
FLAG -1008 240 m*_i
FLAG -1424 160 cons
FLAG -1296 240 mes
FLAG -896 432 0
FLAG -1088 384 0
FLAG -1248 160 diff
FLAG -1872 368 0
SYMBOL ind 240 128 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 86 53 VBottom 2
SYMATTR InstName L1
SYMATTR Value {L}
SYMBOL diode 592 128 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value IDI
SYMBOL voltage 224 128 R0
SYMATTR InstName V1
SYMATTR Value {E}
SYMBOL LTspiceControlLibrary\\PulseModulations\\PWM -704 192 R0
WINDOW 3 -255 -87 Left 2
WINDOW 123 118 -122 Left 2
SYMATTR Value Vin1=0 Vin2=1 Tperiod=1e-4
SYMATTR Value2 Tdelay=0 tripdt=Tdead
SYMATTR InstName U1
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -608 96 R0
SYMATTR InstName U2
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL LTspiceControlLibrary\\PulseModulations\\ComplementaryBufferWithDeadtime -464 224 R0
SYMATTR InstName U3
SYMATTR Value Tdead={Tdead} tripdt={Tdead} *0.5
SYMBOL sw 496 240 M180
SYMATTR InstName S1
SYMATTR Value IDEAL
SYMBOL bv -1296 272 R0
SYMATTR InstName B1
SYMATTR Value V=I(L1)
SYMBOL voltage -1504 176 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -256 286 Left 2
SYMATTR Value PULSE(0 20 0 10p 10p 50e-3 100e-3)
SYMATTR InstName V2
SYMBOL sub -1312 192 R0
SYMATTR InstName U4
SYMBOL Integral -1072 272 R0
SYMATTR InstName U5
SYMBOL Proportional -1216 192 R0
WINDOW 3 -61 -84 Left 2
SYMATTR Value K=-0.0135
SYMATTR InstName U6
SYMBOL add -992 192 R0
SYMATTR InstName U7
SYMBOL add -912 192 R0
SYMATTR InstName U8
SYMBOL bv -896 240 R0
SYMATTR InstName B2
SYMATTR Value V=E/(V(out))
SYMBOL voltage 1200 112 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value {Vnom}
SYMBOL current -1872 240 R180
WINDOW 0 24 80 Left 2
WINDOW 3 -316 -164 Left 2
SYMATTR InstName I1
SYMATTR Value PULSE(0 20 0 10p 10p 50e-3 100e-3)
SYMBOL voltage -1792 144 R0
SYMATTR InstName Icons
SYMATTR Value 0
TEXT 192 416 Left 2 !.param L=0.0045 E=45 C=50e-6 Tdead=10p Rdson=1e-2 Roc=10e6 Vnom=100 Rl=1e-3
TEXT 192 392 Left 2 !.tran 0 300e-3 140e-3 1e-6
TEXT 192 448 Left 2 !.model IDI D(Ron=Rdson Roff=Roc Vfwd=0)
TEXT 192 472 Left 2 !.model IDEAL SW(Ron=Rdson,Roff=Roc,Vt=0.5)
TEXT -1504 56 Left 4 ;Controller
TEXT -1936 40 Left 2 ;Target Current Display
